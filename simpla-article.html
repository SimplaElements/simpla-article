<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simpla-element-behavior/simpla-element-behavior.html"> <dom-module id="simpla-article"> <template> <style>:host{display:block}:host([contenteditable]){outline:0}</style> <slot></slot> </template> <script>!function(){"use strict";var e=["simpla-article-toolbar.html","../simpla-richtext-behavior/simpla-richtext-behavior.html"],i=["bold","italic","link","list","heading","blockquote","image"],t={observers:["_initEditor(editable)","_syncEditableToEditor(editable)"],_importEditorDeps:function(){var i=this,t=[];return e.forEach(function(e){t.push(new Promise(function(t,r){i.importHref(i.resolveUrl(e),t,r)}))}),Promise.all(t)},_initEditor:function(e){var t=this;e&&!this._editor&&this._importEditorDeps().then(function(){var e=window.SimplaBehaviors.RichText;t._editor=new e(t,{inline:!1,placeholder:t.placeholder,plugins:i,editable:t.editable,typographer:!t.noTypographer})})},_syncEditableToEditor:function(e){var i=this._editor;i&&(i.editable=e)}},r={type:"Article",dataProperties:["value"]};Polymer({is:"simpla-article",properties:{placeholder:{type:String,value:"Enter your text..."},noTypographer:{type:Boolean,value:!1},active:{type:Boolean,notify:!0,value:!1},value:{type:String,value:""}},observers:["_render(value)","_ensureInactiveIfNotEditable(editable)"],listeners:{focus:"_goActive",blur:"_goInactive",input:"_refreshValue"},behaviors:[SimplaBehaviors.Element(r),t],attached:function(){this._refreshValue()},_refreshValue:function(){var e=this._editor;this.__refreshingValue=!0,this.value=e?e.getHTML():this.innerHTML,this.__refreshingValue=!1},_render:function(e){var i=this._editor;this.__refreshingValue||(i?i.setHTML(e):this.innerHTML=e)},_goActive:function(){this.editable&&(this.actvie=!0)},_goInactive:function(){this.active=!1},_ensureInactiveIfNotEditable:function(e){e||(this.active=!1)}})}(); </script> </dom-module> 